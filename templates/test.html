<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask API Test</title>
</head>
<body>
    <h1>Test Flask API</h1>

    <h2>Create User</h2>
    <form id="create-user-form">
        <label for="user_name">User Name:</label>
        <input type="text" id="user_name" name="user_name" required><br><br>
        <label for="user_id">User ID:</label>
        <input type="number" id="user_id" name="user_id" required><br><br>
        <label for="emotion">Emotion:</label>
        <input type="text" id="emotion" name="emotion" required><br><br>
        <button type="submit">Create User</button>
    </form>

    <h2>Create Group</h2>
    <form id="create-group-form">
        <label for="group_name">Group Name:</label>
        <input type="text" id="group_name" name="group_name" required><br><br>
        <label for="group_id">Group ID:</label>
        <input type="number" id="group_id" name="group_id" required><br><br>
        <label for="is_anonymous">Is Anonymous:</label>
        <input type="checkbox" id="is_anonymous" name="is_anonymous"><br><br>
        <label for="passcode">Passcode:</label>
        <input type="text" id="passcode" name="passcode" required><br><br>
        <button type="submit">Create Group</button>
    </form>

    <h2>Join Group</h2>
    <form id="join-group-form">
        <label for="join-group-name">Group Name:</label>
        <input type="text" id="join-group-name" name="group_name" required><br><br>
        <label for="join-group-passkey">Passcode:</label>
        <input type="text" id="join-group-passkey" name="group_passkey" required><br><br>
        <button type="submit">Join Group</button>
    </form>

    <h2>Change Emoji</h2>
    <form id="change-emoji-form">
        <label for="new_emoji">New Emoji:</label>
        <input type="text" id="new_emoji" name="new_emoji" required><br><br>
        <button type="submit">Change Emoji</button>
    </form>

    <script>
        document.getElementById('create-user-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const userName = document.getElementById('user_name').value;
            const userId = document.getElementById('user_id').value;
            const emotion = document.getElementById('emotion').value;

            fetch('/create_user', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ user_name: userName, user_id: userId, emotion: emotion })
            })
            .then(response => response.json())
            .then(data => alert(data.message));
        });

        document.getElementById('create-group-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const groupName = document.getElementById('group_name').value;
            const groupId = document.getElementById('group_id').value;
            const isAnonymous = document.getElementById('is_anonymous').checked;
            const passcode = document.getElementById('passcode').value;

            fetch('/create_group', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ group_name: groupName, group_id: groupId, is_anonymous: isAnonymous, passcode: passcode })
            })
            .then(response => response.json())
            .then(data => alert(data.message));
        });

        document.getElementById('join-group-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const groupName = document.getElementById('join-group-name').value;
            const groupPasskey = document.getElementById('join-group-passkey').value;

            fetch('/join_group', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ group_name: groupName, group_passkey: groupPasskey })
            })
            .then(response => response.json())
            .then(data => alert(data.message));
        });

        document.getElementById('change-emoji-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const newEmoji = document.getElementById('new_emoji').value;

            fetch('/change_emoji', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ new_emoji: newEmoji })
            })
            .then(response => response.json())
            .then(data => alert(data.message));
        });
    </script>
</body>
</html>